
> nextjs@0.1.0 test:unit
> jest tests/unit/components/CookieConsentBanner.test.tsx

  console.log
    CookieConsentBanner mounted

      at log (components/CookieConsentBanner.tsx:22:13)

  console.log
    Has consent: true

      at log (components/CookieConsentBanner.tsx:24:13)

  console.log
    CookieConsentBanner mounted

      at log (components/CookieConsentBanner.tsx:22:13)

  console.log
    Has consent: undefined

      at log (components/CookieConsentBanner.tsx:24:13)

  console.log
    CookieConsentBanner mounted

      at log (components/CookieConsentBanner.tsx:22:13)

  console.log
    Has consent: undefined

      at log (components/CookieConsentBanner.tsx:24:13)

  console.log
    Accept all clicked

      at log (components/CookieConsentBanner.tsx:31:13)

  console.log
    Saving consent: { necessary: true, analytics: true, marketing: true }

      at log (components/CookieConsentBanner.tsx:52:13)

  console.log
    Loading scripts with consent: { necessary: true, analytics: true, marketing: true }

      at log (components/CookieConsentBanner.tsx:59:13)

  console.log
    Loading HubSpot script

      at log (components/CookieConsentBanner.tsx:69:15)

  console.log
    CookieConsentBanner mounted

      at log (components/CookieConsentBanner.tsx:22:13)

  console.log
    Has consent: undefined

      at log (components/CookieConsentBanner.tsx:24:13)

  console.log
    CookieConsentBanner mounted

      at log (components/CookieConsentBanner.tsx:22:13)

  console.log
    Has consent: undefined

      at log (components/CookieConsentBanner.tsx:24:13)

  console.log
    Save preferences clicked

      at log (components/CookieConsentBanner.tsx:44:13)

  console.log
    Saving consent: { necessary: true, analytics: true, marketing: false }

      at log (components/CookieConsentBanner.tsx:52:13)

  console.log
    Loading scripts with consent: { necessary: true, analytics: true, marketing: false }

      at log (components/CookieConsentBanner.tsx:59:13)

FAIL tests/unit/components/CookieConsentBanner.test.tsx
  CookieConsentBanner
    ├ù does not render if consent cookie exists (76 ms)
    ΓêÜ renders if consent cookie is missing (30 ms)
    ΓêÜ accepts all cookies (217 ms)
    ΓêÜ opens preferences (45 ms)
    ΓêÜ saves custom preferences (182 ms)

  ΓùÅ CookieConsentBanner ΓÇ║ does not render if consent cookie exists

    expect(element).toBeEmptyDOMElement()

    Received:
      "<div class=\"fixed bottom-0 left-0 w-full bg-gray-900 text-white p-4 z-[9999]\"><div class=\"max-w-7xl mx-auto\"><div class=\"flex flex-col md:flex-row justify-between items-center gap-4\"><p class=\"text-sm\">We use cookies to improve your experience. By clicking \"Accept All\", you consent to non-essential cookies. You can <button class=\"text-orange-500 hover:text-orange-400 underline focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-gray-900 rounded\">manage preferences</button>.</p><div class=\"flex gap-4\"><button class=\"px-4 py-2 bg-orange-500 text-white rounded hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 focus:ring-offset-gray-900\">Accept All</button></div></div></div></div>"

      22 |
      23 |         const { container } = render(<CookieConsentBanner />)
    > 24 |         expect(container).toBeEmptyDOMElement()
         |                           ^
      25 |     })
      26 |
      27 |     it('renders if consent cookie is missing', () => {

      at Object.toBeEmptyDOMElement (tests/unit/components/CookieConsentBanner.test.tsx:24:27)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 4 passed, 5 total
Snapshots:   0 total
Time:        2.333 s
Ran all test suites matching /tests\\unit\\components\\CookieConsentBanner.test.tsx/i.
